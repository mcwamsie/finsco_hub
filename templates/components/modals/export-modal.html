{% extends 'components/modals/base-form-modal.html' %}

{% block modal_content %}
<form
    hx-post="{{ export_url }}"
    hx-target="#export-modal-container"
    hx-swap="innerHTML"
    novalidate=""
>
    {% csrf_token %}

    <!-- Modal body with scrollable content -->
    <div class="p-2 md:p-3 space-y-4 max-h-[60vh] overflow-y-auto">
        {% include "components/non-field-errors.html" %}

        <div class="space-y-4">
            <!-- Export Format -->
            <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700">
                    Export Format
                </label>
                <div class="space-y-2">
                    <div class="flex items-center">
                        <input
                            type="radio"
                            id="format_csv"
                            name="export_format"
                            value="csv"
                            checked
                            class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"
                        />
                        <label for="format_csv" class="ml-2 text-sm text-gray-700">
                            CSV (.csv)
                        </label>
                    </div>
                    <div class="flex items-center">
                        <input
                            type="radio"
                            id="format_excel"
                            name="export_format"
                            value="excel"
                            class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"
                        />
                        <label for="format_excel" class="ml-2 text-sm text-gray-700">
                            Excel (.xlsx)
                        </label>
                    </div>
                </div>
            </div>

            <!-- Export Options -->
            <div class="space-y-3">
                <h4 class="text-sm font-medium text-gray-700">Export Options</h4>
                
                <div class="flex items-center">
                    <input
                        type="checkbox"
                        id="include_inactive"
                        name="include_inactive"
                        class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                    />
                    <label for="include_inactive" class="ml-2 text-sm text-gray-700">
                        Include inactive records
                    </label>
                </div>
                
                <div class="flex items-center">
                    <input
                        type="checkbox"
                        id="include_related"
                        name="include_related"
                        checked
                        class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                    />
                    <label for="include_related" class="ml-2 text-sm text-gray-700">
                        Include related data
                    </label>
                </div>
            </div>

            <!-- Date Range Filter -->
            <div class="space-y-3">
                <h4 class="text-sm font-medium text-gray-700">Date Range (Optional)</h4>
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label for="date_from" class="block text-xs text-gray-600">From</label>
                        <input
                            type="date"
                            id="date_from"
                            name="date_from"
                            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        />
                    </div>
                    <div>
                        <label for="date_to" class="block text-xs text-gray-600">To</label>
                        <input
                            type="date"
                            id="date_to"
                            name="date_to"
                            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        />
                    </div>
                </div>
            </div>

            <!-- Export Info -->
            <div class="bg-green-50 border border-green-200 rounded-md p-3">
                <div class="flex items-center">
                    <i class="bi bi-info-circle text-green-600 mr-2"></i>
                    <div>
                        <p class="text-sm text-green-800">
                            Export will include all visible records based on current filters.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="flex items-center p-2 md:p-3 border-t border-gray-200 justify-end space-x-2">
        <button
            type="button"
            onclick="export_modal.hide()"
            class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
        >
            Cancel
        </button>
        <div class="w-32">
            {% include "components/submit-button.html" with button_text="Export Data" %}
        </div>
    </div>
</form>
{% endblock %}

{% block modal_title %}{{ modal_title }}{% endblock %}